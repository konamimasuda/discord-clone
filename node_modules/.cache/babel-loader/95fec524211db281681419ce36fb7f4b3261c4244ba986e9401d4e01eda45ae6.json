{"ast":null,"code":"import _slicedToArray from\"/Users/konami/Desktop/dev/udemy/discord-clone-udemy/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{onSnapshot,collection,query,orderBy}from\"firebase/firestore\";import{db}from\"../firebase\";import{useAppSelector}from\"../app/hooks\";var useSubCollection=function useSubCollection(collectionName,subCollectionName){var channelId=useAppSelector(function(state){return state.channel.channelId;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),subDocuments=_useState2[0],setSubDocuments=_useState2[1];useEffect(function(){var collectionRef=collection(db,collectionName,String(channelId),subCollectionName);var collectionRefOrderBy=query(collectionRef,orderBy(\"timestamp\",\"desc\"));onSnapshot(collectionRefOrderBy,function(snapshot){var results=[];snapshot.docs.forEach(function(doc){results.push({timestamp:doc.data().timestamp,message:doc.data().message,user:doc.data().user});});setSubDocuments(results);});},[channelId]);return{subDocuments:subDocuments};};export default useSubCollection;","map":{"version":3,"names":["useState","useEffect","onSnapshot","collection","query","orderBy","db","useAppSelector","useSubCollection","collectionName","subCollectionName","channelId","state","channel","_useState","_useState2","_slicedToArray","subDocuments","setSubDocuments","collectionRef","String","collectionRefOrderBy","snapshot","results","docs","forEach","doc","push","timestamp","data","message","user"],"sources":["/Users/konami/Desktop/dev/udemy/discord-clone-udemy/src/hooks/useSubCollection.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  onSnapshot,\n  collection,\n  query,\n  DocumentData,\n  Query,\n  orderBy,\n  Timestamp,\n} from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { useAppSelector } from \"../app/hooks\";\n\ninterface Messages {\n  timestamp: Timestamp;\n  message: string;\n  user: {\n    uid: string;\n    photo: string;\n    email: string;\n    displayName: string;\n  };\n}\n\nconst useSubCollection = (\n  collectionName: string,\n  subCollectionName: string\n) => {\n  const channelId = useAppSelector((state) => state.channel.channelId);\n  const [subDocuments, setSubDocuments] = useState<Messages[]>([]);\n  useEffect(() => {\n    let collectionRef = collection(\n      db,\n      collectionName,\n      String(channelId),\n      subCollectionName\n    );\n\n    const collectionRefOrderBy = query(\n      collectionRef,\n      orderBy(\"timestamp\", \"desc\")\n    );\n\n    onSnapshot(collectionRefOrderBy, (snapshot) => {\n      let results: Messages[] = [];\n      snapshot.docs.forEach((doc) => {\n        results.push({\n          timestamp: doc.data().timestamp,\n          message: doc.data().message,\n          user: doc.data().user,\n        });\n      });\n      setSubDocuments(results);\n    });\n  }, [channelId]);\n  return { subDocuments };\n};\n\nexport default useSubCollection;\n"],"mappings":"yIAAA,OAAgBA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OACEC,UAAU,CACVC,UAAU,CACVC,KAAK,CAGLC,OAAO,KAEF,oBAAoB,CAC3B,OAASC,EAAE,KAAQ,aAAa,CAChC,OAASC,cAAc,KAAQ,cAAc,CAa7C,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CACpBC,cAAsB,CACtBC,iBAAyB,CACtB,CACH,GAAM,CAAAC,SAAS,CAAGJ,cAAc,CAAC,SAACK,KAAK,QAAK,CAAAA,KAAK,CAACC,OAAO,CAACF,SAAS,GAAC,CACpE,IAAAG,SAAA,CAAwCd,QAAQ,CAAa,EAAE,CAAC,CAAAe,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzDG,YAAY,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IACpCd,SAAS,CAAC,UAAM,CACd,GAAI,CAAAkB,aAAa,CAAGhB,UAAU,CAC5BG,EAAE,CACFG,cAAc,CACdW,MAAM,CAACT,SAAS,CAAC,CACjBD,iBAAiB,CAClB,CAED,GAAM,CAAAW,oBAAoB,CAAGjB,KAAK,CAChCe,aAAa,CACbd,OAAO,CAAC,WAAW,CAAE,MAAM,CAAC,CAC7B,CAEDH,UAAU,CAACmB,oBAAoB,CAAE,SAACC,QAAQ,CAAK,CAC7C,GAAI,CAAAC,OAAmB,CAAG,EAAE,CAC5BD,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC,SAACC,GAAG,CAAK,CAC7BH,OAAO,CAACI,IAAI,CAAC,CACXC,SAAS,CAAEF,GAAG,CAACG,IAAI,EAAE,CAACD,SAAS,CAC/BE,OAAO,CAAEJ,GAAG,CAACG,IAAI,EAAE,CAACC,OAAO,CAC3BC,IAAI,CAAEL,GAAG,CAACG,IAAI,EAAE,CAACE,IACnB,CAAC,CAAC,CACJ,CAAC,CAAC,CACFb,eAAe,CAACK,OAAO,CAAC,CAC1B,CAAC,CAAC,CACJ,CAAC,CAAE,CAACZ,SAAS,CAAC,CAAC,CACf,MAAO,CAAEM,YAAY,CAAZA,YAAa,CAAC,CACzB,CAAC,CAED,cAAe,CAAAT,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}